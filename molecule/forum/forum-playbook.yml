---
- name: install Discourse forum
  hosts: forum-host

  roles:
    - role: docker_filesystem

    - role: ansible-role-docker
      docker_install_compose: false

    - role: docker

    - role: discourse
      forum_name: SecureDrop
      repository: https://github.com/discourse/discourse_docker
      branch: master

    - role: monitor_http_vhost
      http_vhost_name: Forum
      http_vhost_fqdn: "{{ forum_vhost_fqdn }}"
      http_vhost_uri: "/"
      http_vhost_string: "All things related to the SecureDrop whistleblower submission system"

  become: True
